<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=shift_jis" />
    <meta http-equiv="Content-Language" content="ja" />
    

	<script language="JavaScript">
	<!--
		var originExchangeList=new Array();
		var afterExchangeList=new Array();
		
		function exchangeText(){
			var str_msg="var file_data=new Array(";
			var t="";
			var s=new Array();
			var i,j;
		
			exchangeList();		//変換リストを取得
			t=document.getElementById("text_area_1").value;
			
			s=t.split("\n");
			for(i=0;i<s.length;i++){
				for(j=0;j<originExchangeList.length;j++){		//変換
					if(s[i].indexOf(originExchangeList[j])!=-1){
						s[i]=s[i].split(originExchangeList[j]).join(afterExchangeList[j]);
					}
				}
				str_msg+="'"+s[i]+"',\n";
			}
			str_msg+="'');";
			document.getElementById("text_area_2").value=str_msg;
			alert("データを変換しました。\n変換したデータをテキストに貼り付けて、ファイル名を「story.js」に変更してください");
			return;
		}
		
		///////変換リストを変数に保存
		function exchangeList(){
			var array_tmp=new Array();
			var line=new Array();
			var str_tmp=document.getElementById("exchange_list").value;
			var i=0;
			var cnt=0;
			
			array_tmp=str_tmp.split("\n");
			
			for(i=0;i<array_tmp.length;i++){
				if(array_tmp[i].indexOf(">")!=-1){		//もし>が含まれる行なら
					line=array_tmp[i].split(">");
					originExchangeList[cnt]=line[0];
					afterExchangeList[cnt]=line[1];
					cnt++;
				}
			}
		}
		
		///////保存
		function saveStorage(){
			var str_tmp=document.getElementById("exchange_list").value;
			localStorage.setItem("key_exchange_list",str_tmp);
			alert("保存しました。");
		}
		///////ロード
		function loadStorage(){
			document.getElementById("exchange_list").value=localStorage.getItem("key_exchange_list");
			alert("ロードしました。");
		}
		
	// -->
	</script>
	
	<style type="text/css">
	<!--
	#text_area_1{
		width:800px;
		height:300px;
	}
	#text_area_2{
		width:800px;
		height:300px;
	}
	#exchange_list{
		width:600px;
		height:200px;
	}
	// -->
	</style>
	<title>書いたテキストをゲーム用に変換します。</title>
</head>

<body>
<p><b>テキストエンコーダーHTMLバージョン</b><br><br></p>
<div id="exchangeText">
<p>０．パソコン上でInternetExplorerを使ってこのHTMLを起動した場合は、下に出ている「ブロックしているコンテンツを許可(A)」をクリックしてください。<br>Firefox,Google Chromeはそのまま実行できます。<br><br></p>

<table><tr><td>
<p>１．ここにあなたの書いたテキストを貼り付けてください。</p>
<textarea id="text_area_1"></textarea>
</td><td>
<p>補助．<br>
ここでは文字列をパスなどに変換するためのリストを入力してください。区切りは半角の「>」です。<br>
複数有る場合は、改行して複数行で書いてください。<br>
（例）<br>
佳奈多絵０１>data/char/little/05_hutaki_kanata01.png<br>
佳奈多絵０２>data/char/little/05_hutaki_kanata02.png<br>
この場合『佳奈多絵０１』が全て『data/char/little/05_hutaki_kanata01.png』といったように変換されます。<br>
なので『■キャラ、中央、フェード、佳奈多絵０１』という場所は、<br>
『■キャラ、中央、フェード、data/char/little/05_hutaki_kanata01.png』に変換されます。<br>
</p>

<textarea id="exchange_list"></textarea>
<button onclick="loadStorage()">ロード</button>
<button onclick="saveStorage()">保存</button>
※ロード、保存機能はInternet Explorerではサポートしておりません。
</td></tr>
</table>

<p>２．変換ボタンを押してください</p>
<button onclick="exchangeText()">変換</button>
<p>３．ここに表示される結果をメモ帳に貼り付け、保存してください。<br>
４．保存が終わったらファイル名を「story.js」に変更してください。</p>
<textarea id="text_area_2"></textarea>



</body>

</html>